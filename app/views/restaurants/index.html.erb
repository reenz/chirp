<h1>Restaurants</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Average Rating</th>
      <th colspan="4"></th>
    </tr>
  </thead>

  <tbody>
    <% @restaurants.each do |restaurant| %>
      <tr>
        <td><%= restaurant.name %></td>
        <td><%= restaurant.description %></td>
        <td><% rating = restaurant.reviews.average(:rating) %>
            <%= rating.nil? ?  'no ratings yet' : rating.round(1)  %></td>
        <td><%= link_to 'Show', restaurant %></td>
        <td><%= link_to 'Edit', edit_restaurant_path(restaurant) %></td>
        <td><%= link_to 'Destroy Restaurant', restaurant, method: :delete  %></td>
        <!-- <td><%= link_to 'Destroy Restaurant', restaurant, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Restaurant', new_restaurant_path %>

<% if user_signed_in? %>
 <li><%= link_to current_user.email, edit_user_registration_path %></li>
 <li><%= link_to "Logout", destroy_user_session_path, method: :delete %></li>
<% else %>
 <li><%= link_to "Sign Up", new_user_registration_path %></li>
 <li><%= link_to "Login", new_user_session_path %></li>
<% end %>
